# 컴퓨터에서의 시간

## 협정 세계시(UTC)

- 원자 시계와 윤초 보정을 기반으로 표준화한 시각
- 모든 시간대는 `UTC+0`을 기준으로 환산
- 대한민국은 `UTC+9`
- 표기법은 `ISO 8601`
  - 2022-12-23T09:00:00:000Z // UTC+0 기준 2022년 12월 23일 9시
  - 2022-12-23T09:00:00:000+09:00 // UTC+9(한국 시간) 기준 2022년 12월 23일 9시
- 가운데 T는 Time을 의미하고 시간 뒤 Z는 Zulu Time을 뜻함
- 경도0(Zero)의 앞글자 z를 나타내며 z는 무선 통신 용어로 Zulu라고 표현

<br>

## 컴퓨터가 시간을 표현하는 방법

- 하드웨어의 시스템 클럭 사용
- `시스템 시간`이란 특정 시각(Epoch)을 기준으로 시스템 클럭 tick을 세는것으로 구현
- 시스템 시간을 값으로 표현한 것을 `타임스탬프` 라 부름
- 타임스탬프는 운영체제마다 기준시간과 단위가 다를 수 있음
- 유닉스 계열의 운영체제는 `Unix Time`이라고 부름

<br>

## 시스템 클럭의 원리 RTC

- RTC(real time clock) 모듈을 사용
- 메인보드에 붙어있으며 전원을 끄더라도 계속 작동함
- 카운터 회로를 통해 클럭을 발생시킴
- 카운터 회로의 핵심 부품인 `결정 진동자` 가 만든 정확한 주파수를 이용
- 1클럭에 `32.768kHz`가 발생 => 1초를 계산하기 편해서

<br>

## Unix Time

- `1970년 1월 1일 0시 0분 0초`가 기준 시각
- 유닉스 개발자 데니스 리치가 걍 설정한 날임
- 1970년 이전 시간은 음수로 표현
- 초단위로 시간이 증가

<br>

## 현재 시간을 컴퓨터가 알아내는 방법

- 시스템 시간을 `네트워크 타임 프로토콜(NTP)`을 통해 동기화<br>
  => 인터넷이 연결되어있지 않으면 받아올 수 없음
- NTP 서버에 네트워크 요청을 해서 현재 시간을 받음
- NTP 서버는 트리구조로 이루어져 있으며 그 계층을 Stratum이라고 부름
- 최상위 계층을 PRC(Primary Reference Clock)이라고 부름<br>
  => PRC는 원자 시계로 정밀하게 측정됨

<br>

## 시간대를 고려하기 위한 방법

- 데이터베이스에 저장된 데이터 `Time Zone`을 사용
- 현실 세계에 이벤트가 발생되면 업데이트 (일광 시간 절약제 시행 등)
- `ZoneId`라고 부르는 `대륙/도시` 형식으로 표기

  - Asia/Seoul
  - America/New_Work

<br>

시간은 서비스에서 사용되는 용도별로 맞춰서 기록해야함

### 순수한 시간

- 시간대, 지역, 문화, 사회를 고려하지 않은 순수한 시간 기록
  - 생일
  - 기업 설립일
  - 기념일
  - 국경일

### UTC

- 역사, 사회, 문화에 대한 맥락 없이 `사건이 발생한 시각` 만을 고려할 때 사용
- 기준 시각을 정해서 사용
- 주로 UTC 0 을 기준으로 사용
  - 로깅
  - 감사
  - 시계열 데이터

### Time Zone이 적용된 시간

- 역사, 사회, 문화를 고려하여 사용자가 이용한 시각을 정확히 알아야할 때 사용
- 주로 UI에 표시되는 시간을 사용자 기준으로 보여줄 때 사용
- ZoneId가 사용자 정보에 저장되어야 함
  - 결제 시각
  - 푸시 알림 시간
  - UI 시각 표시
  - 캘린더
